"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[610],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),l=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=l(e.components);return r.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=l(n),m=a,h=d["".concat(c,".").concat(m)]||d[m]||u[m]||i;return n?r.createElement(h,o(o({ref:t},p),{},{components:n})):r.createElement(h,o({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var l=2;l<i;l++)o[l]=n[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5378:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return c},metadata:function(){return l},toc:function(){return p},default:function(){return d}});var r=n(7462),a=n(3366),i=(n(7294),n(3905)),o=["components"],s={title:"SSL Configuration",sidebar_position:4},c=void 0,l={unversionedId:"getting-started/ssl",id:"getting-started/ssl",title:"SSL Configuration",description:"To increase the security of your server, you can enable encrypted access to the LibreTime administration interface, and direct your users towards this more secure login page. The main advantage of using this encryption is that your remote users' login names and passwords are not sent in plain text across the public Internet or untrusted local networks, such as shared Wi-Fi access points.",source:"@site/../docs/getting-started/ssl.md",sourceDirName:"getting-started",slug:"/getting-started/ssl",permalink:"/docs/getting-started/ssl",editUrl:"https://github.com/libretime/libretime/../docs/getting-started/ssl.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"SSL Configuration",sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Change Default Passwords",permalink:"/docs/getting-started/default-passwords"},next:{title:"Reverse Proxy",permalink:"/docs/getting-started/reverse-proxy"}},p=[{value:"Deploying a certificate with Certbot (Recommended)",id:"deploying-a-certificate-with-certbot-recommended",children:[],level:2},{value:"Deploying a self-signed certificate",id:"deploying-a-self-signed-certificate",children:[{value:"Importing a self-signed certificate into the browser",id:"importing-a-self-signed-certificate-into-the-browser",children:[],level:3}],level:2},{value:"Mixed encrypted and unencrypted content",id:"mixed-encrypted-and-unencrypted-content",children:[],level:2}],u={toc:p};function d(e){var t=e.components,s=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},u,s,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"To increase the security of your server, you can enable encrypted access to the LibreTime administration interface, and direct your users towards this more secure login page. The main advantage of using this encryption is that your remote users' login names and passwords are not sent in plain text across the public Internet or untrusted local networks, such as shared Wi-Fi access points."),(0,i.kt)("h2",{id:"deploying-a-certificate-with-certbot-recommended"},"Deploying a certificate with Certbot (Recommended)"),(0,i.kt)("p",null,"One of the fastest, easiest, and cheapest ways to get an SSL certificate is through ",(0,i.kt)("a",{parentName:"p",href:"https://certbot.eff.org/"},"Certbot"),", as created by the\nElectronic Frontier Foundation. To use Certbot, your Libretime installation must be open to the internet on port 80."),(0,i.kt)("p",null,"Follow ",(0,i.kt)("a",{parentName:"p",href:"https://certbot.eff.org/instructions"},"Certbot's documentation")," for your OS and webserver to install an SSL certificate. You'll need to renew the certificate every 90 days to keep your installation secure."),(0,i.kt)("p",null,"If you aren't able to use Certbot, you may want to try a self-signed certificate."),(0,i.kt)("h2",{id:"deploying-a-self-signed-certificate"},"Deploying a self-signed certificate"),(0,i.kt)("p",null,"The Debian/Ubuntu package ",(0,i.kt)("em",{parentName:"p"},"ssl-cert")," creates a ",(0,i.kt)("em",{parentName:"p"},"snakeoil")," certificate and key based on your server's hostname. This gratis certificate and key pair created under the ",(0,i.kt)("em",{parentName:"p"},"/etc/ssl/certs"),"/ and ",(0,i.kt)("em",{parentName:"p"},"/etc/ssl/private/")," directories will not be recognised by users' browsers without manual intervention. You can install the ",(0,i.kt)("em",{parentName:"p"},"ssl-cert")," package with ",(0,i.kt)("inlineCode",{parentName:"p"},"sudo apt-get install ssl-cert"),"."),(0,i.kt)("p",null,"If the hostname of your server does not match the domain name you intend to use with the LibreTime virtual host, the user's browser will present an additional security warning. You can set the domain name of the certificate by editing the file ",(0,i.kt)("em",{parentName:"p"},"/usr/share/ssl-cert/ssleay.cnf")," to replace the ",(0,i.kt)("em",{parentName:"p"},"@HostName@")," variable:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"commonName                      = @HostName@\n")),(0,i.kt)("p",null,"with the domain name used by LibreTime:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"commonName                      = airtime.example.com\n")),(0,i.kt)("p",null,"Then save the file and regenerate the certificate with"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"sudo make-ssl-cert generate-default-snakeoil --force-overwrite\n")),(0,i.kt)("p",null,"You should enable additional Apache modules for page redirections, custom headers and secure access:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"sudo a2enmod alias headers ssl\n")),(0,i.kt)("p",null,"Next, edit the virtual host configuration for your LibreTime server to include a stanza for the https:// interface on port 443 and a redirect for logins from port 80:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"sudo nano /etc/apache2/sites-available/airtime-vhost.conf\n")),(0,i.kt)("p",null,"Using the following configuration as a guide, replace ",(0,i.kt)("em",{parentName:"p"},"libretime.example.com")," with the name of your server and ",(0,i.kt)("em",{parentName:"p"},(0,i.kt)("a",{parentName:"em",href:"mailto:admin@example.com"},"admin@example.com"))," with your email address. The older SSLv2 and SSLv3 protocols and SSL compression should be disabled, as they are generally believed to be insecure. You may wish to create a ",(0,i.kt)("em",{parentName:"p"},"ServerAlias")," for users to access the administration interface over https:// if required."),(0,i.kt)("p",null,"On port 80, Apache's ",(0,i.kt)("em",{parentName:"p"},"alias")," module is used to set a ",(0,i.kt)("em",{parentName:"p"},"Redirect permanent")," for the login page. Optionally, access could be denied to all sites except ",(0,i.kt)("em",{parentName:"p"},"localhost")," and any other LibreTime servers on your network, so that unencrypted communication between LibreTime components can continue."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-apacheconf",metastring:'title="/etc/apache2/sites-available/airtime-vhost.conf"',title:'"/etc/apache2/sites-available/airtime-vhost.conf"'},'<VirtualHost *:443>\n    SSLEngine on\n    SSLProtocol All -SSLv2 -SSLv3\n    SSLCompression off\n    SSLCertificateFile /etc/ssl/certs/ssl-cert-snakeoil.pem\n    SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key\n    Header always set Strict-Transport-Security "max-age=31536000"\n\n    ServerName libretime.example.com\n    #ServerAlias www.example.com\n\n    ServerAdmin admin@example.com\n\n    DocumentRoot /usr/share/airtime/php/legacy/public\n    DirectoryIndex index.php\n\n    <Directory /usr/share/airtime/php/legacy/public>\n        Options -Indexes FollowSymLinks MultiViews\n        AllowOverride all\n        Order allow,deny\n        Allow from all\n    </Directory>\n</VirtualHost>\n\n<VirtualHost *:80>\n    ServerName libretime.example.com\n\n    ServerAdmin admin@example.com\n\n    DocumentRoot /usr/share/airtime/php/legacy/public\n    Redirect permanent /login https://airtime.example.com/login\n\n    SetEnv APPLICATION_ENV "production"\n\n    <Directory /usr/share/airtime/php/legacy/public>\n        Options -Indexes FollowSymLinks MultiViews\n        AllowOverride All\n        Order allow,deny\n        Allow from all\n    </Directory>\n</VirtualHost>\n')),(0,i.kt)("p",null,"Save the file, then restart Apache with ",(0,i.kt)("inlineCode",{parentName:"p"},"sudo systemctl restart apache2"),"."),(0,i.kt)("p",null,"When attempting to log into your server via ",(0,i.kt)("inlineCode",{parentName:"p"},"http://")," in future, you should be redirected to ",(0,i.kt)("inlineCode",{parentName:"p"},"https://")," automatically."),(0,i.kt)("h3",{id:"importing-a-self-signed-certificate-into-the-browser"},"Importing a self-signed certificate into the browser"),(0,i.kt)("p",null,"The first time you access an LibreTime server with a self-signed certificate over https:// your browser will block the login page and display a security warning. In ",(0,i.kt)("strong",{parentName:"p"},"Mozilla Firefox"),", you can click ",(0,i.kt)("strong",{parentName:"p"},"Technical Details")," to confirm that the warning is due to the certificate being self-signed before clicking the ",(0,i.kt)("strong",{parentName:"p"},"Add Exception")," button. In ",(0,i.kt)("strong",{parentName:"p"},"Google Chrome"),", the button to click on the security warning page is ",(0,i.kt)("strong",{parentName:"p"},"Proceed Anyway"),"."),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(5267).Z,width:"595",height:"675"})),(0,i.kt)("p",null,"On the next page in Firefox, click the ",(0,i.kt)("strong",{parentName:"p"},"Get Certificate")," button to inspect the details of the self-signed certificate. If all is well, click the ",(0,i.kt)("strong",{parentName:"p"},"Confirm Security Exception")," button. You should now be able to proceed to the https:// login page."),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(9900).Z,width:"503",height:"499"})),(0,i.kt)("p",null,"If the users of your LibreTime server wish to avoid going through these steps, or they do not trust the remote LibreTime server to be what it claims to be, it is also possible to import a trusted local copy of a certificate file into the browser. For example, in Firefox version 30 preferences, you can go into the ",(0,i.kt)("strong",{parentName:"p"},"Advanced")," section, click the ",(0,i.kt)("strong",{parentName:"p"},"Certificates")," tab, then click the ",(0,i.kt)("strong",{parentName:"p"},"View Certificates")," button. On the ",(0,i.kt)("strong",{parentName:"p"},"Servers")," tab of the ",(0,i.kt)("strong",{parentName:"p"},"Certificate Manager"),", there is an ",(0,i.kt)("strong",{parentName:"p"},"Import")," button which enables you to load a certificate file from the local computer."),(0,i.kt)("h2",{id:"mixed-encrypted-and-unencrypted-content"},"Mixed encrypted and unencrypted content"),(0,i.kt)("p",null,"Whether your certificate is self-signed or not, you will see browser security warnings whenever a https:// page is delivering unencrypted content, such as the stream from an Icecast server. In Firefox, an exclamation mark icon is displayed in the address bar of the ",(0,i.kt)("strong",{parentName:"p"},"Listen")," pop-up."))}d.isMDXComponent=!0},5267:function(e,t,n){t.Z=n.p+"assets/images/ssl-screenshot547-connection_untrusted-582baca832eb34fffc69845df29e6bb4.png"},9900:function(e,t,n){t.Z=n.p+"assets/images/ssl-screenshot548-confirm_exception-030fc98f8deb402adb58947d7825b959.png"}}]);