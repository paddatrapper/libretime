"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4200],{73435:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>u});var a=n(87462),i=(n(67294),n(3905));n(16758);const o={title:"Troubleshooting",sidebar_position:90},s=void 0,l={unversionedId:"admin-manual/troubleshooting",id:"version-3.0.0/admin-manual/troubleshooting",title:"Troubleshooting",description:"This guide walk you though the steps required to troubleshoot LibreTime.",source:"@site/versioned_docs/version-3.0.0/admin-manual/troubleshooting.md",sourceDirName:"admin-manual",slug:"/admin-manual/troubleshooting",permalink:"/docs/admin-manual/troubleshooting",draft:!1,editUrl:"https://github.com/libretime/libretime/blob/main/docs/versioned_docs/version-3.0.0/admin-manual/troubleshooting.md",tags:[],version:"3.0.0",sidebarPosition:90,frontMatter:{title:"Troubleshooting",sidebar_position:90},sidebar:"tutorialSidebar",previous:{title:"Change default passwords",permalink:"/docs/admin-manual/default-passwords"},next:{title:"Uninstall",permalink:"/docs/admin-manual/uninstall"}},r={},u=[{value:"Services status",id:"services-status",level:2},{value:"Logs",id:"logs",level:2},{value:"Test the stream inputs",id:"test-the-stream-inputs",level:2}],m={toc:u};function p(e){let{components:t,...o}=e;return(0,i.kt)("wrapper",(0,a.Z)({},m,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"This guide walk you though the steps required to troubleshoot LibreTime."),(0,i.kt)("h2",{id:"services-status"},"Services status"),(0,i.kt)("p",null,"When facing a problem with LibreTime the first reflex is to verify whether the services are running."),(0,i.kt)("p",null,"In the web interface, go to ",(0,i.kt)("strong",{parentName:"p"},"Settings")," > ",(0,i.kt)("strong",{parentName:"p"},"Status")," to see the state of the services."),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(23764).Z,width:"1500",height:"1122"})),(0,i.kt)("p",null,"Or directly from a terminal:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"sudo systemctl --all --plain | egrep 'libretime|nginx|php.*-fpm'\n")),(0,i.kt)("p",null,"If a service isn't running, you should search for details using the tool running those services.\nOn a common setup, you should use the systemd service status:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"sudo systemctl status libretime-worker\n")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"Be sure to replace the service name with the problematic one.")),(0,i.kt)("h2",{id:"logs"},"Logs"),(0,i.kt)("p",null,"The next place to search for details on potential errors are the log files."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"/var/log/syslog")," file contains most of the system logs combined. This log file may contain information that the application logger wasn't able to log, such as early startup errors. You can follow the logs using:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'sudo tail -n 100 -f "/var/log/syslog"\n# Filter the logs\nsudo tail -n 100 -f "/var/log/syslog" | egrep \'libretime|nginx|php.*-fpm\'\n')),(0,i.kt)("p",null,"On a common setup, to access LibreTime specific logs you should search for the following files:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"/var/log/libretime/analyzer.log")," file contains logs from the analyzer,"),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"/var/log/libretime/api.log")," file contains logs from the api,"),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"/var/log/libretime/legacy.log")," file contains logs from the legacy app,"),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"/var/log/libretime/liquidsoap.log")," file contains logs from liquidsoap,"),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"/var/log/libretime/playout.log")," file contains logs from playout."),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"/var/log/libretime/worker.log")," file contains logs from the worker.")),(0,i.kt)("p",null,"For some LibreTime services, you can set a higher log level using the ",(0,i.kt)("inlineCode",{parentName:"p"},"LIBRETIME_LOG_LEVEL")," environment variable, or by running the service by hand and using a command line flag:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"sudo -u libretime libretime-analyzer --config /etc/libretime/config.yml --log-level debug\n")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"/var/log/nginx/libretime.error.log")," file contains logs from the web server."),(0,i.kt)("h2",{id:"test-the-stream-inputs"},"Test the stream inputs"),(0,i.kt)("p",null,"To test or debug your input streams, you can use the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/libretime/libretime/blob/main/tools/test-stream-input.py"},(0,i.kt)("inlineCode",{parentName:"a"},"tools/test-stream-input.py"))," script to send a test sound to your stream inputs."),(0,i.kt)("p",null,"To test the ",(0,i.kt)("inlineCode",{parentName:"p"},"main")," input stream, you can run the following command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"./tools/test-stream-input.py \\\n    --host radio.example.org \\\n    --port 8001 \\\n    --mount main \\\n    --user source \\\n    --password hackme\n\n# Or using the --url option\n./tools/test-stream-input.py --url source:hackme@radio.example.org:8001/main\n")),(0,i.kt)("p",null,"If you are hitting ",(0,i.kt)("inlineCode",{parentName:"p"},"HTTP error 401 Unauthorized")," on the main input stream, make sure that you have configured a user and password in the ",(0,i.kt)("strong",{parentName:"p"},"Settings")," > ",(0,i.kt)("strong",{parentName:"p"},"Streams settings")," page."),(0,i.kt)("p",null,"If you are connected but don't hear anything streaming, make sure that the main input stream is connected and enabled. In addition, to automatically turn on/off the stream on connect/disconnect you can configure the input stream auto switch in the ",(0,i.kt)("strong",{parentName:"p"},"Settings")," > ",(0,i.kt)("strong",{parentName:"p"},"Streams settings")," page."))}p.isMDXComponent=!0},23764:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/troubleshooting-status-page-61c938940393f94a08d1686476a54f4e.png"}}]);